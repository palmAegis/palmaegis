<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Data Management | Palm Aegis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/sidebar.css" />
    <style>
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #4caf50;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --info-color: #2196f3;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-header {
            background-color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-left h1 {
            font-size: 1.8rem;
            color: var(--primary-color);
        }

        .container {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 1.8rem;
            color: var(--primary-color);
        }

        .page-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #1b5e20;
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background-color: #d6d6d6;
        }

        .form-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 30px;
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .section-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-hint {
            font-size: 0.85rem;
            color: #777;
            margin-top: 5px;
        }

        .required::after {
            content: " *";
            color: var(--danger-color);
        }

        .map-placeholder {
            background-color: #f9f9f9;
            border: 2px dashed #ddd;
            border-radius: 8px;
            height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #777;
            margin-top: 10px;
        }

        .map-placeholder i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #ccc;
        }

        .tree-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .tree-type-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tree-type-card:hover {
            border-color: var(--primary-color);
            background-color: #f0f9f0;
        }

        .tree-type-card.selected {
            border-color: var(--primary-color);
            background-color: #e8f5e9;
        }

        .tree-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .tree-count-input {
            width: 80px;
            text-align: center;
            margin-top: 10px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .farms-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .farm-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .farm-card:hover {
            transform: translateY(-5px);
        }

        .farm-header {
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
        }

        .farm-name {
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .farm-location {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .farm-body {
            padding: 15px;
        }

        .farm-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
        }

        .info-label {
            color: #777;
        }

        .info-value {
            font-weight: 600;
        }

        .farm-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }

        .farm-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: none;
            border: none;
            color: #777;
            cursor: pointer;
            font-size: 1.1rem;
            transition: color 0.3s;
        }

        .action-btn:hover {
            color: var(--primary-color);
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #777;
            grid-column: 1 / -1;
        }

        .no-data i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }

        .loading {
            text-align: center;
            padding: 40px;
            grid-column: 1 / -1;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .tree-type-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .farms-list {
                grid-template-columns: 1fr;
            }

            .page-actions {
                flex-direction: column;
                width: 100%;
            }

            .page-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div id="sidebarPlaceholder"></div>
        <script src="js/sidebar-loader.js"></script>

        <main class="main-content">
            <div class="top-header">
                <div class="header-left">
                    <h1>Farm Data Management</h1>
                </div>
            </div>

            <div class="container">
                <div class="page-header">
                    <h2 class="page-title">Farm Information</h2>
                    <div class="page-actions">
                        <button class="btn btn-secondary" id="viewFarmsBtn">
                            <i class="fas fa-list"></i> View Farms
                        </button>
                        <button class="btn btn-primary" id="addFarmBtn">
                            <i class="fas fa-plus"></i> Add New Farm
                        </button>
                    </div>
                </div>

                <!-- Farm Form -->
                <div class="form-container" id="farmForm">
                    <div class="form-section">
                        <h3 class="section-title">Basic Farm Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required" for="farmName">Farm Name</label>
                                <input type="text" class="form-input" id="farmName" placeholder="Enter farm name">
                            </div>
                            <div class="form-group">
                                <label class="form-label required" for="farmLocation">Location</label>
                                <input type="text" class="form-input" id="farmLocation" placeholder="Enter farm location">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="farmSize">Farm Size (hectares)</label>
                                <input type="number" class="form-input" id="farmSize" placeholder="Enter size in hectares" min="0" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="ownershipType">Ownership Type</label>
                                <select class="form-select" id="ownershipType">
                                    <option value="">Select ownership type</option>
                                    <option value="owned">Owned</option>
                                    <option value="leased">Leased</option>
                                    <option value="cooperative">Cooperative</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Location Details</h3>
                        <div class="form-group">
                            <label class="form-label" for="gpsCoordinates">GPS Coordinates</label>
                            <input type="text" class="form-input" id="gpsCoordinates" placeholder="Latitude, Longitude">
                            <div class="form-hint">Example: 3.1390, 101.6869</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Farm Map</label>
                            <div class="map-placeholder">
                                <i class="fas fa-map"></i>
                                <p>Farm map visualization</p>
                                <button class="btn btn-secondary" style="margin-top: 10px;">
                                    <i class="fas fa-upload"></i> Upload Map
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Tree Information</h3>
                        <div class="form-group">
                            <label class="form-label required">Primary Tree Type</label>
                            <div class="tree-type-grid">
                                <div class="tree-type-card" data-type="oil_palm">
                                    <div class="tree-icon">
                                        <i class="fas fa-tree"></i>
                                    </div>
                                    <div>Oil Palm</div>
                                    <input type="number" class="tree-count-input" placeholder="Count" min="0">
                                </div>
                                <div class="tree-type-card" data-type="coconut">
                                    <div class="tree-icon">
                                        <i class="fas fa-tree"></i>
                                    </div>
                                    <div>Coconut Palm</div>
                                    <input type="number" class="tree-count-input" placeholder="Count" min="0">
                                </div>
                                <div class="tree-type-card" data-type="date_palm">
                                    <div class="tree-icon">
                                        <i class="fas fa-tree"></i>
                                    </div>
                                    <div>Date Palm</div>
                                    <input type="number" class="tree-count-input" placeholder="Count" min="0">
                                </div>
                                <div class="tree-type-card" data-type="other">
                                    <div class="tree-icon">
                                        <i class="fas fa-tree"></i>
                                    </div>
                                    <div>Other</div>
                                    <input type="number" class="tree-count-input" placeholder="Count" min="0">
                                </div>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label" for="plantingDate">Average Planting Date</label>
                                <input type="date" class="form-input" id="plantingDate">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="treeAge">Average Tree Age (years)</label>
                                <input type="number" class="form-input" id="treeAge" placeholder="Enter average age" min="0" step="0.1">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Soil & Environmental Conditions</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label" for="soilType">Soil Type</label>
                                <select class="form-select" id="soilType">
                                    <option value="">Select soil type</option>
                                    <option value="clay">Clay</option>
                                    <option value="sandy">Sandy</option>
                                    <option value="loamy">Loamy</option>
                                    <option value="clay_loam">Clay Loam</option>
                                    <option value="sandy_loam">Sandy Loam</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="soilPh">Soil pH Level</label>
                                <input type="number" class="form-input" id="soilPh" placeholder="Enter pH value" min="0" max="14" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="rainfall">Average Rainfall (mm/year)</label>
                                <input type="number" class="form-input" id="rainfall" placeholder="Enter rainfall" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="temperature">Average Temperature (Â°C)</label>
                                <input type="number" class="form-input" id="temperature" placeholder="Enter temperature" min="-10" max="50" step="0.1">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Management Practices</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label" for="irrigationType">Irrigation Type</label>
                                <select class="form-select" id="irrigationType">
                                    <option value="">Select irrigation type</option>
                                    <option value="rainfed">Rainfed</option>
                                    <option value="drip">Drip Irrigation</option>
                                    <option value="sprinkler">Sprinkler System</option>
                                    <option value="flood">Flood Irrigation</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="fertilizerType">Fertilizer Type</label>
                                <select class="form-select" id="fertilizerType">
                                    <option value="">Select fertilizer type</option>
                                    <option value="organic">Organic</option>
                                    <option value="chemical">Chemical</option>
                                    <option value="mixed">Mixed</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="pestControl">Pest Control Method</label>
                                <select class="form-select" id="pestControl">
                                    <option value="">Select pest control</option>
                                    <option value="chemical">Chemical</option>
                                    <option value="biological">Biological</option>
                                    <option value="integrated">Integrated Pest Management</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="lastTreatment">Last Treatment Date</label>
                                <input type="date" class="form-input" id="lastTreatment">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Additional Notes</h3>
                        <div class="form-group">
                            <label class="form-label" for="farmNotes">Notes & Observations</label>
                            <textarea class="form-textarea" id="farmNotes" placeholder="Enter any additional notes about the farm, observations, or specific concerns..."></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary" id="cancelBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-primary" id="saveFarmBtn">
                            <i class="fas fa-save"></i> Save Farm Data
                        </button>
                    </div>
                </div>

                <!-- Farms List View -->
                <div class="farms-list" id="farmsList" style="display: none;">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading farm data...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // DOM Elements
        const farmForm = document.getElementById('farmForm');
        const farmsList = document.getElementById('farmsList');
        const viewFarmsBtn = document.getElementById('viewFarmsBtn');
        const addFarmBtn = document.getElementById('addFarmBtn');
        const saveFarmBtn = document.getElementById('saveFarmBtn');
        const cancelBtn = document.getElementById('cancelBtn');

        // Tree type selection
        const treeTypeCards = document.querySelectorAll('.tree-type-card');
        treeTypeCards.forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all cards
                treeTypeCards.forEach(c => c.classList.remove('selected'));
                // Add selected class to clicked card
                card.classList.add('selected');
            });
        });

        // Toggle between form and list views
        viewFarmsBtn.addEventListener('click', () => {
            farmForm.style.display = 'none';
            farmsList.style.display = 'grid';
            loadFarmsList();
        });

        addFarmBtn.addEventListener('click', () => {
            farmForm.style.display = 'block';
            farmsList.style.display = 'none';
            resetForm();
        });

        cancelBtn.addEventListener('click', () => {
            farmForm.style.display = 'none';
            farmsList.style.display = 'grid';
            loadFarmsList();
        });

        // Save farm data
        saveFarmBtn.addEventListener('click', () => {
            if (validateForm()) {
                saveFarmData();
            }
        });

        // Form validation
        function validateForm() {
            const farmName = document.getElementById('farmName').value;
            const farmLocation = document.getElementById('farmLocation').value;
            const selectedTreeType = document.querySelector('.tree-type-card.selected');

            if (!farmName.trim()) {
                alert('Please enter a farm name');
                return false;
            }

            if (!farmLocation.trim()) {
                alert('Please enter a farm location');
                return false;
            }

            if (!selectedTreeType) {
                alert('Please select a primary tree type');
                return false;
            }

            return true;
        }

        // Reset form
        function resetForm() {
            document.getElementById('farmForm').reset();
            treeTypeCards.forEach(card => card.classList.remove('selected'));
        }

        // Save farm data (placeholder function)
        function saveFarmData() {
            const farmData = {
                name: document.getElementById('farmName').value,
                location: document.getElementById('farmLocation').value,
                size: document.getElementById('farmSize').value,
                ownershipType: document.getElementById('ownershipType').value,
                gpsCoordinates: document.getElementById('gpsCoordinates').value,
                treeType: document.querySelector('.tree-type-card.selected')?.dataset.type,
                treeCount: document.querySelector('.tree-type-card.selected input')?.value,
                plantingDate: document.getElementById('plantingDate').value,
                treeAge: document.getElementById('treeAge').value,
                soilType: document.getElementById('soilType').value,
                soilPh: document.getElementById('soilPh').value,
                rainfall: document.getElementById('rainfall').value,
                temperature: document.getElementById('temperature').value,
                irrigationType: document.getElementById('irrigationType').value,
                fertilizerType: document.getElementById('fertilizerType').value,
                pestControl: document.getElementById('pestControl').value,
                lastTreatment: document.getElementById('lastTreatment').value,
                notes: document.getElementById('farmNotes').value,
                createdAt: new Date().toISOString()
            };

            // In a real application, you would save this to Firebase or your backend
            console.log('Farm data to save:', farmData);
            
            // Show success message
            alert('Farm data saved successfully!');
            
            // Switch to list view
            farmForm.style.display = 'none';
            farmsList.style.display = 'grid';
            loadFarmsList();
        }

        // Load farms list (placeholder function)
        function loadFarmsList() {
            // In a real application, you would load this from Firebase or your backend
            const farmsListElement = document.getElementById('farmsList');
            
            // Simulate loading delay
            setTimeout(() => {
                // Sample data - replace with actual data from your database
                const sampleFarms = [
                    {
                        id: 1,
                        name: "Main Oil Palm Plantation",
                        location: "Selangor, Malaysia",
                        size: 50,
                        treeType: "oil_palm",
                        treeCount: 12000,
                        plantingDate: "2018-03-15",
                        lastAssessment: "2024-01-15"
                    },
                    {
                        id: 2,
                        name: "Coconut Grove",
                        location: "Johor, Malaysia",
                        size: 12,
                        treeType: "coconut",
                        treeCount: 800,
                        plantingDate: "2020-07-22",
                        lastAssessment: "2024-02-10"
                    }
                ];

                if (sampleFarms.length === 0) {
                    farmsListElement.innerHTML = `
                        <div class="no-data">
                            <i class="fas fa-tractor"></i>
                            <h3>No Farms Added Yet</h3>
                            <p>Add your first farm to start monitoring tree health.</p>
                            <button class="btn btn-primary" id="addFirstFarmBtn" style="margin-top: 15px;">
                                <i class="fas fa-plus"></i> Add First Farm
                            </button>
                        </div>
                    `;
                    
                    document.getElementById('addFirstFarmBtn').addEventListener('click', () => {
                        farmForm.style.display = 'block';
                        farmsList.style.display = 'none';
                        resetForm();
                    });
                } else {
                    farmsListElement.innerHTML = sampleFarms.map(farm => `
                        <div class="farm-card">
                            <div class="farm-header">
                                <div class="farm-name">${farm.name}</div>
                                <div class="farm-location">${farm.location}</div>
                            </div>
                            <div class="farm-body">
                                <div class="farm-info">
                                    <div class="info-item">
                                        <span class="info-label">Size:</span>
                                        <span class="info-value">${farm.size} hectares</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Tree Type:</span>
                                        <span class="info-value">${getTreeTypeName(farm.treeType)}</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Tree Count:</span>
                                        <span class="info-value">${farm.treeCount.toLocaleString()}</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Planted:</span>
                                        <span class="info-value">${new Date(farm.plantingDate).toLocaleDateString()}</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Last Assessment:</span>
                                        <span class="info-value">${farm.lastAssessment ? new Date(farm.lastAssessment).toLocaleDateString() : 'Never'}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="farm-footer">
                                <div class="farm-date">Added: ${new Date().toLocaleDateString()}</div>
                                <div class="farm-actions">
                                    <button class="action-btn edit-farm" title="Edit Farm" data-id="${farm.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn assess-farm" title="Start Assessment" data-id="${farm.id}">
                                        <i class="fas fa-clipboard-check"></i>
                                    </button>
                                    <button class="action-btn delete-farm" title="Delete Farm" data-id="${farm.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');

                    // Add event listeners for action buttons
                    document.querySelectorAll('.edit-farm').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const farmId = e.currentTarget.dataset.id;
                            editFarm(farmId);
                        });
                    });

                    document.querySelectorAll('.assess-farm').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const farmId = e.currentTarget.dataset.id;
                            startAssessment(farmId);
                        });
                    });

                    document.querySelectorAll('.delete-farm').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const farmId = e.currentTarget.dataset.id;
                            deleteFarm(farmId);
                        });
                    });
                }
            }, 1000);
        }

        // Helper function to get tree type name
        function getTreeTypeName(type) {
            const types = {
                'oil_palm': 'Oil Palm',
                'coconut': 'Coconut Palm',
                'date_palm': 'Date Palm',
                'other': 'Other'
            };
            return types[type] || 'Unknown';
        }

        // Placeholder functions for farm actions
        function editFarm(farmId) {
            alert(`Edit farm with ID: ${farmId}`);
            // In a real application, you would load the farm data into the form
        }

        function startAssessment(farmId) {
            // Redirect to assessment page with farm ID
            window.location.href = `farmassessment.html?farmId=${farmId}`;
        }

        function deleteFarm(farmId) {
            if (confirm('Are you sure you want to delete this farm? This action cannot be undone.')) {
                alert(`Delete farm with ID: ${farmId}`);
                // In a real application, you would delete from Firebase/backend
                loadFarmsList(); // Refresh the list
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Start with the form hidden and show the farms list
            farmForm.style.display = 'none';
            farmsList.style.display = 'grid';
            loadFarmsList();
        });
    </script>
</body>
</html>